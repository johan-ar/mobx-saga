{"mappings":"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","sources":["mobx-saga/src/decorators/index.ts"],"sourcesContent":["import type { ActionMatchingPattern } from \"@redux-saga/types\";\nimport type { Saga, TakeableChannel } from \"redux-saga\";\nimport { buffers, channel } from \"redux-saga\";\nimport type { ActionPattern, ForkEffect } from \"redux-saga/effects\";\nimport {\n  debounce as debounce_,\n  fork as fork_,\n  spawn as spawn_,\n  takeEvery as takeEvery_,\n  takeLatest as takeLatest_,\n  takeLeading as takeLeading_,\n  throttle as throttle_,\n} from \"redux-saga/effects\";\nimport { L } from \"ts-toolbelt\";\n\nconst register = channel<ForkEffect<unknown>>(buffers.expanding());\n\nexport type SagaMethodDecorator<Args extends any[] = any[]> = <\n  SagaMethod extends Saga<Args>\n>(\n  target: Object,\n  propKey: string | symbol,\n  descriptor: TypedPropertyDescriptor<SagaMethod>\n) => TypedPropertyDescriptor<SagaMethod> | void;\n\n/**\n * See {@link takeLeading_} for details\n */\nexport function takeLeading<P extends ActionPattern, Args extends any[]>(\n  pattern: P,\n  ...args: Args\n): SagaMethodDecorator<L.Append<Args, ActionMatchingPattern<P>>>;\n\nexport function takeLeading<T, Args extends any[]>(\n  channel: TakeableChannel<T>,\n  ...args: Args\n): SagaMethodDecorator<L.Append<Args, T>>;\n\nexport function takeLeading(\n  pattern: ActionPattern | TakeableChannel<any>,\n  ...args: any[]\n): SagaMethodDecorator {\n  return (_target, _propKey, descriptor) => {\n    if (!descriptor.value) return;\n    register.put(takeLeading_<any, Saga>(pattern, descriptor.value, ...args));\n    return descriptor;\n  };\n}\n\n/**\n * See {@link takeLatest_} for details\n */\nexport function takeLatest<P extends ActionPattern, Args extends any[]>(\n  pattern: P,\n  ...args: Args\n): SagaMethodDecorator<L.Append<Args, ActionMatchingPattern<P>>>;\n\nexport function takeLatest<T, Args extends any[]>(\n  channel: TakeableChannel<T>,\n  ...args: Args\n): SagaMethodDecorator<L.Append<Args, T>>;\n\nexport function takeLatest(\n  pattern: ActionPattern | TakeableChannel<any>,\n  ...args: any[]\n): SagaMethodDecorator {\n  return (_target, _propKey, descriptor) => {\n    if (!descriptor.value) return;\n    register.put(takeLatest_<any, Saga>(pattern, descriptor.value, ...args));\n    return descriptor;\n  };\n}\n\n/**\n * See {@link takeEvery_} for details\n */\nexport function takeEvery<P extends ActionPattern, Args extends any[]>(\n  pattern: P,\n  ...args: Args\n): SagaMethodDecorator<L.Append<Args, ActionMatchingPattern<P>>>;\n\nexport function takeEvery<T, Args extends any[]>(\n  channel: TakeableChannel<T>,\n  ...args: Args\n): SagaMethodDecorator<L.Append<Args, T>>;\n\nexport function takeEvery(\n  pattern: ActionPattern | TakeableChannel<any>,\n  ...args: any[]\n): SagaMethodDecorator {\n  return (_target, _propKey, descriptor) => {\n    if (!descriptor.value) return;\n    register.put(takeEvery_<any, Saga>(pattern, descriptor.value, ...args));\n    return descriptor;\n  };\n}\n\n/**\n * See {@link fork_} for details\n */\nexport function fork<Args extends any[]>(\n  ...args: Args\n): SagaMethodDecorator<Args>;\n\nexport function fork(...args: any[]): SagaMethodDecorator {\n  return (target, _propKey, descriptor) => {\n    if (!descriptor.value) return;\n    register.put(fork_<object, Saga>([target, descriptor.value], ...args));\n  };\n}\n\n/**\n * See {@link spawn_} for details\n */\nexport function spawn<Args extends any[]>(\n  ...args: Args\n): SagaMethodDecorator<Args>;\n\nexport function spawn(...args: any[]): SagaMethodDecorator {\n  return (target, _propKey, descriptor) => {\n    if (!descriptor.value) return;\n    register.put(spawn_<object, Saga>([target, descriptor.value], ...args));\n  };\n}\n\n/**\n * See {@link throttle_} for details\n */\nexport function throttle<P extends ActionPattern, Args extends any[]>(\n  ms: number,\n  pattern: P,\n  ...args: Args\n): SagaMethodDecorator<L.Append<Args, ActionMatchingPattern<P>>>;\n\nexport function throttle<T, Args extends any[]>(\n  ms: number,\n  pattern: TakeableChannel<T>,\n  ...args: Args\n): SagaMethodDecorator<L.Append<Args, T>>;\n\nexport function throttle(\n  ms: number,\n  pattern: ActionPattern | TakeableChannel<any>,\n  ...args: any[]\n): SagaMethodDecorator {\n  return (_target, _propKey, descriptor) => {\n    if (!descriptor.value) return;\n    register.put(throttle_<any, Saga>(ms, pattern, descriptor.value, ...args));\n  };\n}\n\n/**\n * See {@link debounce_} for details\n */\nexport function debounce<P extends ActionPattern, Args extends any[]>(\n  ms: number,\n  pattern: P,\n  ...args: Args\n): SagaMethodDecorator<L.Append<Args, ActionMatchingPattern<P>>>;\n\nexport function debounce<T, Args extends any[]>(\n  ms: number,\n  pattern: TakeableChannel<T>,\n  ...args: Args\n): SagaMethodDecorator<L.Append<Args, T>>;\n\nexport function debounce(\n  ms: number,\n  pattern: ActionPattern | TakeableChannel<any>,\n  ...args: any[]\n): SagaMethodDecorator {\n  return (_target, _propKey, descriptor) => {\n    if (!descriptor.value) return;\n    register.put(debounce_<any, Saga>(ms, pattern, descriptor.value, ...args));\n  };\n}\n\nexport default {\n  takeLeading,\n  takeLatest,\n  takeEvery,\n  fork,\n  spawn,\n  throttle,\n  debounce,\n};\n\nexport function watchSagaDecorators(): ForkEffect<never> {\n  return takeEvery_(register, function* registerSagaMethod(effect) {\n    try {\n      yield effect;\n    } catch (e) {\n      console.error(\"[SagaDecorators] Error forking task\", effect, e);\n    }\n  });\n}\n"],"names":[],"version":3,"file":"index.mjs.map"}