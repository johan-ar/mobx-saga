{"mappings":"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","sources":["mobx-saga/src/decorators/src/decorators/index.ts","mobx-saga/src/decorators/index.ts"],"sourcesContent":[null,"import type { ActionMatchingPattern } from \"@redux-saga/types\";\nimport type { Saga, TakeableChannel } from \"redux-saga\";\nimport { buffers, channel } from \"redux-saga\";\nimport type { ActionPattern, ForkEffect } from \"redux-saga/effects\";\nimport {\n  debounce as debounce_,\n  fork as fork_,\n  spawn as spawn_,\n  takeEvery as takeEvery_,\n  takeLatest as takeLatest_,\n  takeLeading as takeLeading_,\n  throttle as throttle_,\n} from \"redux-saga/effects\";\nimport { L } from \"ts-toolbelt\";\n\nconst register = channel<ForkEffect<unknown>>(buffers.expanding());\n\nexport type SagaMethodDecorator<Args extends any[] = any[]> = <\n  SagaMethod extends Saga<Args>\n>(\n  target: Object,\n  propKey: string | symbol,\n  descriptor: TypedPropertyDescriptor<SagaMethod>\n) => TypedPropertyDescriptor<SagaMethod> | void;\n\n/**\n * See {@link takeLeading_} for details\n */\nexport function takeLeading<P extends ActionPattern, Args extends any[]>(\n  pattern: P,\n  ...args: Args\n): SagaMethodDecorator<L.Append<Args, ActionMatchingPattern<P>>>;\n\nexport function takeLeading<T, Args extends any[]>(\n  channel: TakeableChannel<T>,\n  ...args: Args\n): SagaMethodDecorator<L.Append<Args, T>>;\n\nexport function takeLeading(\n  pattern: ActionPattern | TakeableChannel<any>,\n  ...args: any[]\n): SagaMethodDecorator {\n  return (_target, _propKey, descriptor) => {\n    if (!descriptor.value) return;\n    register.put(takeLeading_<any, Saga>(pattern, descriptor.value, ...args));\n    return descriptor;\n  };\n}\n\n/**\n * See {@link takeLatest_} for details\n */\nexport function takeLatest<P extends ActionPattern, Args extends any[]>(\n  pattern: P,\n  ...args: Args\n): SagaMethodDecorator<L.Append<Args, ActionMatchingPattern<P>>>;\n\nexport function takeLatest<T, Args extends any[]>(\n  channel: TakeableChannel<T>,\n  ...args: Args\n): SagaMethodDecorator<L.Append<Args, T>>;\n\nexport function takeLatest(\n  pattern: ActionPattern | TakeableChannel<any>,\n  ...args: any[]\n): SagaMethodDecorator {\n  return (_target, _propKey, descriptor) => {\n    if (!descriptor.value) return;\n    register.put(takeLatest_<any, Saga>(pattern, descriptor.value, ...args));\n    return descriptor;\n  };\n}\n\n/**\n * See {@link takeEvery_} for details\n */\nexport function takeEvery<P extends ActionPattern, Args extends any[]>(\n  pattern: P,\n  ...args: Args\n): SagaMethodDecorator<L.Append<Args, ActionMatchingPattern<P>>>;\n\nexport function takeEvery<T, Args extends any[]>(\n  channel: TakeableChannel<T>,\n  ...args: Args\n): SagaMethodDecorator<L.Append<Args, T>>;\n\nexport function takeEvery(\n  pattern: ActionPattern | TakeableChannel<any>,\n  ...args: any[]\n): SagaMethodDecorator {\n  return (_target, _propKey, descriptor) => {\n    if (!descriptor.value) return;\n    register.put(takeEvery_<any, Saga>(pattern, descriptor.value, ...args));\n    return descriptor;\n  };\n}\n\n/**\n * See {@link fork_} for details\n */\nexport function fork<Args extends any[]>(\n  ...args: Args\n): SagaMethodDecorator<Args>;\n\nexport function fork(...args: any[]): SagaMethodDecorator {\n  return (target, _propKey, descriptor) => {\n    if (!descriptor.value) return;\n    register.put(fork_<object, Saga>([target, descriptor.value], ...args));\n  };\n}\n\n/**\n * See {@link spawn_} for details\n */\nexport function spawn<Args extends any[]>(\n  ...args: Args\n): SagaMethodDecorator<Args>;\n\nexport function spawn(...args: any[]): SagaMethodDecorator {\n  return (target, _propKey, descriptor) => {\n    if (!descriptor.value) return;\n    register.put(spawn_<object, Saga>([target, descriptor.value], ...args));\n  };\n}\n\n/**\n * See {@link throttle_} for details\n */\nexport function throttle<P extends ActionPattern, Args extends any[]>(\n  ms: number,\n  pattern: P,\n  ...args: Args\n): SagaMethodDecorator<L.Append<Args, ActionMatchingPattern<P>>>;\n\nexport function throttle<T, Args extends any[]>(\n  ms: number,\n  pattern: TakeableChannel<T>,\n  ...args: Args\n): SagaMethodDecorator<L.Append<Args, T>>;\n\nexport function throttle(\n  ms: number,\n  pattern: ActionPattern | TakeableChannel<any>,\n  ...args: any[]\n): SagaMethodDecorator {\n  return (_target, _propKey, descriptor) => {\n    if (!descriptor.value) return;\n    register.put(throttle_<any, Saga>(ms, pattern, descriptor.value, ...args));\n  };\n}\n\n/**\n * See {@link debounce_} for details\n */\nexport function debounce<P extends ActionPattern, Args extends any[]>(\n  ms: number,\n  pattern: P,\n  ...args: Args\n): SagaMethodDecorator<L.Append<Args, ActionMatchingPattern<P>>>;\n\nexport function debounce<T, Args extends any[]>(\n  ms: number,\n  pattern: TakeableChannel<T>,\n  ...args: Args\n): SagaMethodDecorator<L.Append<Args, T>>;\n\nexport function debounce(\n  ms: number,\n  pattern: ActionPattern | TakeableChannel<any>,\n  ...args: any[]\n): SagaMethodDecorator {\n  return (_target, _propKey, descriptor) => {\n    if (!descriptor.value) return;\n    register.put(debounce_<any, Saga>(ms, pattern, descriptor.value, ...args));\n  };\n}\n\nexport default {\n  takeLeading,\n  takeLatest,\n  takeEvery,\n  fork,\n  spawn,\n  throttle,\n  debounce,\n};\n\nexport function watchSagaDecorators(): ForkEffect<never> {\n  return takeEvery_(register, function* registerSagaMethod(effect) {\n    try {\n      yield effect;\n    } catch (e) {\n      console.error(\"[SagaDecorators] Error forking task\", effect, e);\n    }\n  });\n}\n"],"names":[],"version":3,"file":"index.d.ts.map"}